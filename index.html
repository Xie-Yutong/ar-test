<html>
  <head>
    <title>Lego AR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
      body {
        margin: 0;
        overflow: hidden;
      }

      .info-box {
        position: fixed;
        top: 10%;
        right: 2%;
        width: 300px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        display: none;
        z-index: 999;
        font-family: sans-serif;
      }

      .info-box h3 {
        margin-top: 0;
      }
    </style>
  </head>

  <body>
    <!-- Info Modals -->
    <div id="modal-0" class="info-box">
      <h3>Donut Info</h3>
      <p>This is a delicious donut. It contains sugar, flour, and joy.</p>
    </div>

    <div id="modal-1" class="info-box">
      <h3>Pizza Info</h3>
      <p>This is a pizza. It has cheese, tomato, and toppings of your dreams.</p>
    </div>

    <!-- AR Scene -->
    <a-scene mindar-image="imageTargetSrc: https://Xie-Yutong.github.io/ar-test/targets4.mind; maxTrack: 2" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             vr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">
             
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    </a-scene>

    <script>
      // Wait for scene to load
      window.addEventListener("DOMContentLoaded", () => {
        const sceneEl = document.querySelector("a-scene");

        const showModal = (index) => {
          document.querySelectorAll(".info-box").forEach(div => div.style.display = "none");
          const modal = document.getElementById(`modal-${index}`);
          if (modal) modal.style.display = "block";
        };

        const hideModals = () => {
          document.querySelectorAll(".info-box").forEach(div => div.style.display = "none");
        };

        // Listen for target found/lost events
        sceneEl.addEventListener("targetFound", (e) => {
          const targetId = e.target.id;
          if (targetId === "target-0") showModal(0);
          if (targetId === "target-1") showModal(1);
        });

        sceneEl.addEventListener("targetLost", () => {
          hideModals();
        });
      });
    </script>
  </body>
</html>

